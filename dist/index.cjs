'use strict';

var chunkO57F7GWI_cjs = require('./chunk-O57F7GWI.cjs');
var pe = require('process');
var st = require('os');
var z = require('path');

function _interopNamespace(e) {
	if (e && e.__esModule) return e;
	var n = Object.create(null);
	if (e) {
		Object.keys(e).forEach(function (k) {
			if (k !== 'default') {
				var d = Object.getOwnPropertyDescriptor(e, k);
				Object.defineProperty(n, k, d.get ? d : {
					enumerable: true,
					get: function () { return e[k]; }
				});
			}
		});
	}
	n.default = e;
	return Object.freeze(n);
}

var pe__namespace = /*#__PURE__*/_interopNamespace(pe);
var st__namespace = /*#__PURE__*/_interopNamespace(st);
var z__namespace = /*#__PURE__*/_interopNamespace(z);

var We=chunkO57F7GWI_cjs.b(M=>{var ft=M&&M.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}});}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r];}),ht=M&&M.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),pt=M&&M.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&ft(t,e,r);return ht(t,e),t};Object.defineProperty(M,"__esModule",{value:!0});M.getOptions=void 0;var x=pt(chunkO57F7GWI_cjs.d());function dt(e){let t={followSymbolicLinks:!0,implicitDescendants:!0,matchDirectories:!0,omitBrokenSymbolicLinks:!0};return e&&(typeof e.followSymbolicLinks=="boolean"&&(t.followSymbolicLinks=e.followSymbolicLinks,x.debug(`followSymbolicLinks '${t.followSymbolicLinks}'`)),typeof e.implicitDescendants=="boolean"&&(t.implicitDescendants=e.implicitDescendants,x.debug(`implicitDescendants '${t.implicitDescendants}'`)),typeof e.matchDirectories=="boolean"&&(t.matchDirectories=e.matchDirectories,x.debug(`matchDirectories '${t.matchDirectories}'`)),typeof e.omitBrokenSymbolicLinks=="boolean"&&(t.omitBrokenSymbolicLinks=e.omitBrokenSymbolicLinks,x.debug(`omitBrokenSymbolicLinks '${t.omitBrokenSymbolicLinks}'`))),t}M.getOptions=dt;});var Y=chunkO57F7GWI_cjs.b(h=>{var mt=h&&h.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}});}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r];}),_t=h&&h.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),bt=h&&h.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&mt(t,e,r);return _t(t,e),t},yt=h&&h.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(h,"__esModule",{value:!0});h.safeTrimTrailingSeparator=h.normalizeSeparators=h.hasRoot=h.hasAbsoluteRoot=h.ensureAbsoluteRoot=h.dirname=void 0;var X=bt(chunkO57F7GWI_cjs.a("path")),j=yt(chunkO57F7GWI_cjs.a("assert")),A=process.platform==="win32";function gt(e){if(e=ne(e),A&&/^\\\\[^\\]+(\\[^\\]+)?$/.test(e))return e;let t=X.dirname(e);return A&&/^\\\\[^\\]+\\[^\\]+\\$/.test(t)&&(t=ne(t)),t}h.dirname=gt;function wt(e,t){if(j.default(e,"ensureAbsoluteRoot parameter 'root' must not be empty"),j.default(t,"ensureAbsoluteRoot parameter 'itemPath' must not be empty"),ie(t))return t;if(A){if(t.match(/^[A-Z]:[^\\/]|^[A-Z]:$/i)){let r=process.cwd();return j.default(r.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${r}'`),t[0].toUpperCase()===r[0].toUpperCase()?t.length===2?`${t[0]}:\\${r.substr(3)}`:(r.endsWith("\\")||(r+="\\"),`${t[0]}:\\${r.substr(3)}${t.substr(2)}`):`${t[0]}:\\${t.substr(2)}`}else if(B(t).match(/^\\$|^\\[^\\]/)){let r=process.cwd();return j.default(r.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${r}'`),`${r[0]}:\\${t.substr(1)}`}}return j.default(ie(e),"ensureAbsoluteRoot parameter 'root' must have an absolute root"),e.endsWith("/")||A&&e.endsWith("\\")||(e+=X.sep),e+t}h.ensureAbsoluteRoot=wt;function ie(e){return j.default(e,"hasAbsoluteRoot parameter 'itemPath' must not be empty"),e=B(e),A?e.startsWith("\\\\")||/^[A-Z]:\\/i.test(e):e.startsWith("/")}h.hasAbsoluteRoot=ie;function vt(e){return j.default(e,"isRooted parameter 'itemPath' must not be empty"),e=B(e),A?e.startsWith("\\")||/^[A-Z]:/i.test(e):e.startsWith("/")}h.hasRoot=vt;function B(e){return e=e||"",A?(e=e.replace(/\//g,"\\"),(/^\\\\+[^\\]/.test(e)?"\\":"")+e.replace(/\\\\+/g,"\\")):e.replace(/\/\/+/g,"/")}h.normalizeSeparators=B;function ne(e){return e?(e=B(e),!e.endsWith(X.sep)||e===X.sep||A&&/^[A-Z]:\\$/i.test(e)?e:e.substr(0,e.length-1)):""}h.safeTrimTrailingSeparator=ne;});var J=chunkO57F7GWI_cjs.b(H=>{Object.defineProperty(H,"__esModule",{value:!0});H.MatchKind=void 0;(function(e){e[e.None=0]="None",e[e.Directory=1]="Directory",e[e.File=2]="File",e[e.All=3]="All";})(H.MatchKind||(H.MatchKind={}));});var Ve=chunkO57F7GWI_cjs.b(y=>{var St=y&&y.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}});}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r];}),Et=y&&y.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),Mt=y&&y.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&St(t,e,r);return Et(t,e),t};Object.defineProperty(y,"__esModule",{value:!0});y.partialMatch=y.match=y.getSearchPaths=void 0;var Be=Mt(Y()),Dt=J(),He=process.platform==="win32";function At(e){e=e.filter(i=>!i.negate);let t={};for(let i of e){let s=He?i.searchPath.toUpperCase():i.searchPath;t[s]="candidate";}let r=[];for(let i of e){let s=He?i.searchPath.toUpperCase():i.searchPath;if(t[s]==="included")continue;let n=!1,a=s,o=Be.dirname(a);for(;o!==a;){if(t[o]){n=!0;break}a=o,o=Be.dirname(a);}n||(r.push(i.searchPath),t[s]="included");}return r}y.getSearchPaths=At;function Pt(e,t){let r=Dt.MatchKind.None;for(let i of e)i.negate?r&=~i.match(t):r|=i.match(t);return r}y.match=Pt;function Rt(e,t){return e.some(r=>!r.negate&&r.partialMatch(t))}y.partialMatch=Rt;});var Ge=chunkO57F7GWI_cjs.b(v=>{var Lt=v&&v.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}});}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r];}),jt=v&&v.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),Fe=v&&v.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Lt(t,e,r);return jt(t,e),t},Ct=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(v,"__esModule",{value:!0});v.Path=void 0;var V=Fe(chunkO57F7GWI_cjs.a("path")),P=Fe(Y()),F=Ct(chunkO57F7GWI_cjs.a("assert")),It=process.platform==="win32",ae=class{constructor(t){if(this.segments=[],typeof t=="string")if(F.default(t,"Parameter 'itemPath' must not be empty"),t=P.safeTrimTrailingSeparator(t),!P.hasRoot(t))this.segments=t.split(V.sep);else {let r=t,i=P.dirname(r);for(;i!==r;){let s=V.basename(r);this.segments.unshift(s),r=i,i=P.dirname(r);}this.segments.unshift(r);}else {F.default(t.length>0,"Parameter 'itemPath' must not be an empty array");for(let r=0;r<t.length;r++){let i=t[r];F.default(i,"Parameter 'itemPath' must not contain any empty segments"),i=P.normalizeSeparators(t[r]),r===0&&P.hasRoot(i)?(i=P.safeTrimTrailingSeparator(i),F.default(i===P.dirname(i),"Parameter 'itemPath' root segment contains information for multiple segments"),this.segments.push(i)):(F.default(!i.includes(V.sep),"Parameter 'itemPath' contains unexpected path separators"),this.segments.push(i));}}}toString(){let t=this.segments[0],r=t.endsWith(V.sep)||It&&/^[A-Z]:$/i.test(t);for(let i=1;i<this.segments.length;i++)r?r=!1:t+=V.sep,t+=this.segments[i];return t}};v.Path=ae;});var Ue=chunkO57F7GWI_cjs.b(O=>{var Tt=O&&O.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}});}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r];}),$t=O&&O.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),ce=O&&O.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Tt(t,e,r);return $t(t,e),t},Nt=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O,"__esModule",{value:!0});O.Pattern=void 0;var qt=ce(chunkO57F7GWI_cjs.a("os")),G=ce(chunkO57F7GWI_cjs.a("path")),g=ce(Y()),C=Nt(chunkO57F7GWI_cjs.a("assert")),Wt=chunkO57F7GWI_cjs.f(),se=J(),Q=Ge(),D=process.platform==="win32",oe=class e{constructor(t,r=!1,i,s){this.negate=!1;let n;if(typeof t=="string")n=t.trim();else {i=i||[],C.default(i.length,"Parameter 'segments' must not empty");let c=e.getLiteral(i[0]);C.default(c&&g.hasAbsoluteRoot(c),"Parameter 'segments' first element must be a root path"),n=new Q.Path(i).toString().trim(),t&&(n=`!${n}`);}for(;n.startsWith("!");)this.negate=!this.negate,n=n.substr(1).trim();n=e.fixupPattern(n,s),this.segments=new Q.Path(n).segments,this.trailingSeparator=g.normalizeSeparators(n).endsWith(G.sep),n=g.safeTrimTrailingSeparator(n);let a=!1,o=this.segments.map(c=>e.getLiteral(c)).filter(c=>!a&&!(a=c===""));this.searchPath=new Q.Path(o).toString(),this.rootRegExp=new RegExp(e.regExpEscape(o[0]),D?"i":""),this.isImplicitPattern=r;let u={dot:!0,nobrace:!0,nocase:D,nocomment:!0,noext:!0,nonegate:!0};n=D?n.replace(/\\/g,"/"):n,this.minimatch=new Wt.Minimatch(n,u);}match(t){return this.segments[this.segments.length-1]==="**"?(t=g.normalizeSeparators(t),!t.endsWith(G.sep)&&this.isImplicitPattern===!1&&(t=`${t}${G.sep}`)):t=g.safeTrimTrailingSeparator(t),this.minimatch.match(t)?this.trailingSeparator?se.MatchKind.Directory:se.MatchKind.All:se.MatchKind.None}partialMatch(t){return t=g.safeTrimTrailingSeparator(t),g.dirname(t)===t?this.rootRegExp.test(t):this.minimatch.matchOne(t.split(D?/\\+/:/\/+/),this.minimatch.set[0],!0)}static globEscape(t){return (D?t:t.replace(/\\/g,"\\\\")).replace(/(\[)(?=[^/]+\])/g,"[[]").replace(/\?/g,"[?]").replace(/\*/g,"[*]")}static fixupPattern(t,r){C.default(t,"pattern cannot be empty");let i=new Q.Path(t).segments.map(s=>e.getLiteral(s));if(C.default(i.every((s,n)=>(s!=="."||n===0)&&s!==".."),`Invalid pattern '${t}'. Relative pathing '.' and '..' is not allowed.`),C.default(!g.hasRoot(t)||i[0],`Invalid pattern '${t}'. Root segment must not contain globs.`),t=g.normalizeSeparators(t),t==="."||t.startsWith(`.${G.sep}`))t=e.globEscape(process.cwd())+t.substr(1);else if(t==="~"||t.startsWith(`~${G.sep}`))r=r||qt.homedir(),C.default(r,"Unable to determine HOME directory"),C.default(g.hasAbsoluteRoot(r),`Expected HOME directory to be a rooted path. Actual '${r}'`),t=e.globEscape(r)+t.substr(1);else if(D&&(t.match(/^[A-Z]:$/i)||t.match(/^[A-Z]:[^\\]/i))){let s=g.ensureAbsoluteRoot("C:\\dummy-root",t.substr(0,2));t.length>2&&!s.endsWith("\\")&&(s+="\\"),t=e.globEscape(s)+t.substr(2);}else if(D&&(t==="\\"||t.match(/^\\[^\\]/))){let s=g.ensureAbsoluteRoot("C:\\dummy-root","\\");s.endsWith("\\")||(s+="\\"),t=e.globEscape(s)+t.substr(1);}else t=g.ensureAbsoluteRoot(e.globEscape(process.cwd()),t);return g.normalizeSeparators(t)}static getLiteral(t){let r="";for(let i=0;i<t.length;i++){let s=t[i];if(s==="\\"&&!D&&i+1<t.length){r+=t[++i];continue}else {if(s==="*"||s==="?")return "";if(s==="["&&i+1<t.length){let n="",a=-1;for(let o=i+1;o<t.length;o++){let u=t[o];if(u==="\\"&&!D&&o+1<t.length){n+=t[++o];continue}else if(u==="]"){a=o;break}else n+=u;}if(a>=0){if(n.length>1)return "";if(n){r+=n,i=a;continue}}}}r+=s;}return r}static regExpEscape(t){return t.replace(/[[\\^$.|?*+()]/g,"\\$&")}};O.Pattern=oe;});var Ke=chunkO57F7GWI_cjs.b(k=>{Object.defineProperty(k,"__esModule",{value:!0});k.SearchState=void 0;var le=class{constructor(t,r){this.path=t,this.level=r;}};k.SearchState=le;});var Ye=chunkO57F7GWI_cjs.b(m=>{var Bt=m&&m.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}});}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r];}),Ht=m&&m.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),K=m&&m.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Bt(t,e,r);return Ht(t,e),t},ue=m&&m.__awaiter||function(e,t,r,i){function s(n){return n instanceof r?n:new r(function(a){a(n);})}return new(r||(r=Promise))(function(n,a){function o(l){try{c(i.next(l));}catch(d){a(d);}}function u(l){try{c(i.throw(l));}catch(d){a(d);}}function c(l){l.done?n(l.value):s(l.value).then(o,u);}c((i=i.apply(e,t||[])).next());})},Vt=m&&m.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(n){r[n]=e[n]&&function(a){return new Promise(function(o,u){a=e[n](a),s(o,u,a.done,a.value);})};}function s(n,a,o,u){Promise.resolve(u).then(function(c){n({value:c,done:o});},a);}},R=m&&m.__await||function(e){return this instanceof R?(this.v=e,this):new R(e)},Ft=m&&m.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(f){i[f]&&(s[f]=function(_){return new Promise(function(T,me){n.push([f,_,T,me])>1||o(f,_);})});}function o(f,_){try{u(i[f](_));}catch(T){d(n[0][3],T);}}function u(f){f.value instanceof R?Promise.resolve(f.value.v).then(c,l):d(n[0][2],f);}function c(f){o("next",f);}function l(f){o("throw",f);}function d(f,_){f(_),n.shift(),n.length&&o(n[0][0],n[0][1]);}};Object.defineProperty(m,"__esModule",{value:!0});m.DefaultGlobber=void 0;var fe=K(chunkO57F7GWI_cjs.d()),U=K(chunkO57F7GWI_cjs.a("fs")),Ze=K(We()),Gt=K(chunkO57F7GWI_cjs.a("path")),ee=K(Ve()),ze=J(),xe=Ue(),Xe=Ke(),Ut=process.platform==="win32",he=class e{constructor(t){this.patterns=[],this.searchPaths=[],this.options=Ze.getOptions(t);}getSearchPaths(){return this.searchPaths.slice()}glob(){var t,r;return ue(this,void 0,void 0,function*(){let i=[];try{for(var s=Vt(this.globGenerator()),n;n=yield s.next(),!n.done;){let a=n.value;i.push(a);}}catch(a){t={error:a};}finally{try{n&&!n.done&&(r=s.return)&&(yield r.call(s));}finally{if(t)throw t.error}}return i})}globGenerator(){return Ft(this,arguments,function*(){let r=Ze.getOptions(this.options),i=[];for(let a of this.patterns)i.push(a),r.implicitDescendants&&(a.trailingSeparator||a.segments[a.segments.length-1]!=="**")&&i.push(new xe.Pattern(a.negate,!0,a.segments.concat("**")));let s=[];for(let a of ee.getSearchPaths(i)){fe.debug(`Search path '${a}'`);try{yield R(U.promises.lstat(a));}catch(o){if(o.code==="ENOENT")continue;throw o}s.unshift(new Xe.SearchState(a,1));}let n=[];for(;s.length;){let a=s.pop(),o=ee.match(i,a.path),u=!!o||ee.partialMatch(i,a.path);if(!o&&!u)continue;let c=yield R(e.stat(a,r,n));if(c)if(c.isDirectory()){if(o&ze.MatchKind.Directory&&r.matchDirectories)yield yield R(a.path);else if(!u)continue;let l=a.level+1,d=(yield R(U.promises.readdir(a.path))).map(f=>new Xe.SearchState(Gt.join(a.path,f),l));s.push(...d.reverse());}else o&ze.MatchKind.File&&(yield yield R(a.path));}})}static create(t,r){return ue(this,void 0,void 0,function*(){let i=new e(r);Ut&&(t=t.replace(/\r\n/g,`
`),t=t.replace(/\r/g,`
`));let s=t.split(`
`).map(n=>n.trim());for(let n of s)!n||n.startsWith("#")||i.patterns.push(new xe.Pattern(n));return i.searchPaths.push(...ee.getSearchPaths(i.patterns)),i})}static stat(t,r,i){return ue(this,void 0,void 0,function*(){let s;if(r.followSymbolicLinks)try{s=yield U.promises.stat(t.path);}catch(n){if(n.code==="ENOENT"){if(r.omitBrokenSymbolicLinks){fe.debug(`Broken symlink '${t.path}'`);return}throw new Error(`No information found for the path '${t.path}'. This may indicate a broken symbolic link.`)}throw n}else s=yield U.promises.lstat(t.path);if(s.isDirectory()&&r.followSymbolicLinks){let n=yield U.promises.realpath(t.path);for(;i.length>=t.level;)i.pop();if(i.some(a=>a===n)){fe.debug(`Symlink cycle detected for path '${t.path}' and realpath '${n}'`);return}i.push(n);}return s})}};m.DefaultGlobber=he;});var et=chunkO57F7GWI_cjs.b(w=>{var Kt=w&&w.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}});}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r];}),Zt=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),q=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Kt(t,e,r);return Zt(t,e),t},zt=w&&w.__awaiter||function(e,t,r,i){function s(n){return n instanceof r?n:new r(function(a){a(n);})}return new(r||(r=Promise))(function(n,a){function o(l){try{c(i.next(l));}catch(d){a(d);}}function u(l){try{c(i.throw(l));}catch(d){a(d);}}function c(l){l.done?n(l.value):s(l.value).then(o,u);}c((i=i.apply(e,t||[])).next());})},xt=w&&w.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(n){r[n]=e[n]&&function(a){return new Promise(function(o,u){a=e[n](a),s(o,u,a.done,a.value);})};}function s(n,a,o,u){Promise.resolve(u).then(function(c){n({value:c,done:o});},a);}};Object.defineProperty(w,"__esModule",{value:!0});w.hashFiles=void 0;var Je=q(chunkO57F7GWI_cjs.a("crypto")),Qe=q(chunkO57F7GWI_cjs.d()),ke=q(chunkO57F7GWI_cjs.a("fs")),Xt=q(chunkO57F7GWI_cjs.a("stream")),Yt=q(chunkO57F7GWI_cjs.a("util")),Jt=q(chunkO57F7GWI_cjs.a("path"));function Qt(e,t,r=!1){var i,s,n;return zt(this,void 0,void 0,function*(){let a=r?Qe.info:Qe.debug,o=!1,u=t||((n=process.env.GITHUB_WORKSPACE)!==null&&n!==void 0?n:process.cwd()),c=Je.createHash("sha256"),l=0;try{for(var d=xt(e.globGenerator()),f;f=yield d.next(),!f.done;){let _=f.value;if(a(_),!_.startsWith(`${u}${Jt.sep}`)){a(`Ignore '${_}' since it is not under GITHUB_WORKSPACE.`);continue}if(ke.statSync(_).isDirectory()){a(`Skip directory '${_}'.`);continue}let T=Je.createHash("sha256");yield Yt.promisify(Xt.pipeline)(ke.createReadStream(_),T),c.write(T.digest()),l++,o||(o=!0);}}catch(_){i={error:_};}finally{try{f&&!f.done&&(s=d.return)&&(yield s.call(d));}finally{if(i)throw i.error}}return c.end(),o?(a(`Found ${l} files to hash.`),c.digest("hex")):(a("No matches found for glob"),"")})}w.hashFiles=Qt;});var it=chunkO57F7GWI_cjs.b(L=>{var tt=L&&L.__awaiter||function(e,t,r,i){function s(n){return n instanceof r?n:new r(function(a){a(n);})}return new(r||(r=Promise))(function(n,a){function o(l){try{c(i.next(l));}catch(d){a(d);}}function u(l){try{c(i.throw(l));}catch(d){a(d);}}function c(l){l.done?n(l.value):s(l.value).then(o,u);}c((i=i.apply(e,t||[])).next());})};Object.defineProperty(L,"__esModule",{value:!0});L.hashFiles=L.create=void 0;var kt=Ye(),er=et();function rt(e,t){return tt(this,void 0,void 0,function*(){return yield kt.DefaultGlobber.create(e,t)})}L.create=rt;function tr(e,t="",r,i=!1){return tt(this,void 0,void 0,function*(){let s=!0;r&&typeof r.followSymbolicLinks=="boolean"&&(s=r.followSymbolicLinks);let n=yield rt(e,{followSymbolicLinks:s});return er.hashFiles(n,t,i)})}L.hashFiles=tr;});var lt=chunkO57F7GWI_cjs.c(chunkO57F7GWI_cjs.d(),1);var p=chunkO57F7GWI_cjs.c(chunkO57F7GWI_cjs.d(),1),I=chunkO57F7GWI_cjs.c(chunkO57F7GWI_cjs.e(),1);var W=chunkO57F7GWI_cjs.c(chunkO57F7GWI_cjs.d(),1),te=chunkO57F7GWI_cjs.c(chunkO57F7GWI_cjs.e(),1);async function qe(e){await W.group("Install depext",async()=>{if(await(0, te.exec)("opam",["install","opam-depext",...chunkO57F7GWI_cjs.g==="win32"?["depext-cygwinports"]:[]]),chunkO57F7GWI_cjs.g==="win32"){let r="";e.includes("mingw64")?r="x86_64-w64-mingw32":e.includes("mingw32")&&(r="i686-w64-mingw32"),W.addPath(z__namespace.posix.join("/","usr",r,"sys-root","mingw","bin"));}});}async function re(e){await W.group("Install system packages required by opam packages",async()=>{let t=e.map(r=>z__namespace.basename(r,".opam"));await(0, te.exec)("opam",["depext",...t,...chunkO57F7GWI_cjs.l]);});}var nt=chunkO57F7GWI_cjs.c(it(),1);async function at(){return await(await nt.create(chunkO57F7GWI_cjs.m)).glob()}async function ct(){if(chunkO57F7GWI_cjs.h?p.exportVariable("OPAMCONFIRMLEVEL","unsafe-yes"):p.exportVariable("OPAMCLI","2.0"),p.exportVariable("OPAMCOLOR","always"),p.exportVariable("OPAMERRLOGLEN",0),p.exportVariable("OPAMJOBS",st__namespace.cpus().length),p.exportVariable("OPAMPRECISETRACKING",1),p.exportVariable("OPAMSOLVERTIMEOUT",1e3),p.exportVariable("OPAMYES",1),chunkO57F7GWI_cjs.g==="win32"){let s=z__namespace.join("D:",".opam");p.exportVariable("OPAMROOT",s);}chunkO57F7GWI_cjs.g==="win32"&&await p.group("Change the file system behavior parameters",async()=>{await(0, I.exec)("fsutil",["behavior","query","SymlinkEvaluation"]),await(0, I.exec)("fsutil",["behavior","set","symlinkEvaluation","R2L:1","R2R:1"]),await(0, I.exec)("fsutil",["behavior","query","SymlinkEvaluation"]);}),chunkO57F7GWI_cjs.g==="win32"&&(p.exportVariable("HOME",pe__namespace.env.USERPROFILE),p.exportVariable("MSYS","winsymlinks:native")),chunkO57F7GWI_cjs.g==="win32"&&await chunkO57F7GWI_cjs.w();let e=await chunkO57F7GWI_cjs.z(),t=pe__namespace.env.HOMEBREW_NO_INSTALLED_DEPENDENTS_CHECK;chunkO57F7GWI_cjs.g==="macos"&&p.exportVariable("HOMEBREW_NO_INSTALLED_DEPENDENTS_CHECK",1),await chunkO57F7GWI_cjs.q(),chunkO57F7GWI_cjs.g==="macos"&&p.exportVariable("HOMEBREW_NO_INSTALLED_DEPENDENTS_CHECK",t),await chunkO57F7GWI_cjs.u(),await chunkO57F7GWI_cjs.t(chunkO57F7GWI_cjs.o);let r=await chunkO57F7GWI_cjs.v(chunkO57F7GWI_cjs.j);e||(await chunkO57F7GWI_cjs.r(r),await chunkO57F7GWI_cjs.A()),await chunkO57F7GWI_cjs.B(),chunkO57F7GWI_cjs.k&&await qe(r),chunkO57F7GWI_cjs.i&&(await chunkO57F7GWI_cjs.x(),await chunkO57F7GWI_cjs.D(),p.exportVariable("DUNE_CACHE","enabled"),p.exportVariable("DUNE_CACHE_TRANSPORT","direct"),p.exportVariable("DUNE_CACHE_STORAGE_MODE","copy")),p.exportVariable("CLICOLOR_FORCE","1");let i=await at();if(i.length>0&&(chunkO57F7GWI_cjs.n&&await chunkO57F7GWI_cjs.s(i),chunkO57F7GWI_cjs.k))try{await re(i);}catch(s){s instanceof Error&&p.notice(`An error has been caught in some system package index files, so the system package index files have been re-synchronised, and the system package installation has been retried: ${s.message.toLocaleLowerCase()}`),await chunkO57F7GWI_cjs.p(),await re(i);}await(0, I.exec)("opam",["--version"]),chunkO57F7GWI_cjs.k&&await(0, I.exec)("opam",["depext","--version"]),await(0, I.exec)("opam",["exec","--","ocaml","-version"]);}async function rr(){try{await ct(),pe__namespace.exit(0);}catch(e){e instanceof Error&&lt.setFailed(e.message),pe__namespace.exit(1);}}rr();
